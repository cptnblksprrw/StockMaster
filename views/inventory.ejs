<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory</title>
    <link rel="stylesheet" href="/styles/styles.css">
</head>
<body>
    <header>
        <h1>Warehouse Inventory</h1>
    </header>
    <main>
        <h2>Item List</h2>
        <table>
            <thead>
                <tr>
                    <th>Item Name</th>
                    <th>Quantity</th>
                    <th>Barcode</th>
                    <th>Details</th>
                </tr>
            </thead>
            <tbody>
                <% items.forEach(item => { %>
                    <tr>
                        <td><%= item.name %></td>
                        <td><%= item.quantity %></td>
                        <td><%= item.barcode %></td>
                        <td><a href="/item/<%= item._id %>">View Details</a></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
        <button id="openAddModal" class="button">Add New Item</button>
        <button id="openScanModal" class="button">Scan Item</button>
    </main>

    <!-- Add Inventory Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeAddModal">&times;</span>
            <form action="/add-item" method="POST">
                <h2>Add Inventory</h2>
                <label for="name">Item Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" required>

                <label for="category">Category:</label>
                <input type="text" id="category" name="category" required>

                <label for="description">Description:</label>
                <textarea id="description" name="description" rows="4" required></textarea>

                <button type="submit">Add Item</button>
            </form>
        </div>
    </div>

    <!-- Scan Item Modal -->
    <div id="scanModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeScanModal">&times;</span>
            <form id="scanForm" action="/scan-item" method="POST">
                <h2>Scan Item</h2>
                <label for="barcode">Scan Barcode:</label>
                <input 
                    type="text" 
                    id="barcode" 
                    name="barcode" 
                    placeholder="Scan barcode here" 
                    required 
                    autofocus>
            </form>
        </div>
    </div>

    <script>
        // Add Inventory Modal Controls
        const addModal = document.getElementById('addModal');
        const openAddModal = document.getElementById('openAddModal');
        const closeAddModal = document.getElementById('closeAddModal');

        openAddModal.addEventListener('click', () => {
            addModal.style.display = 'block';
        });

        closeAddModal.addEventListener('click', () => {
            addModal.style.display = 'none';
        });

        // Scan Item Modal Controls
        const scanModal = document.getElementById('scanModal');
        const openScanModal = document.getElementById('openScanModal');
        const closeScanModal = document.getElementById('closeScanModal');

        openScanModal.addEventListener('click', () => {
            scanModal.style.display = 'block';
        });

        closeScanModal.addEventListener('click', () => {
            scanModal.style.display = 'none';
        });

        // Close modals if user clicks outside of them
        window.addEventListener('click', (event) => {
            if (event.target === addModal) {
                addModal.style.display = 'none';
            } else if (event.target === scanModal) {
                scanModal.style.display = 'none';
            }
        });
    </script>
</body>
</html>