<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventory</title>
    <link rel="stylesheet" href="/styles/styles.css" />
  </head>
  <body>
    <header>
      <h1>Warehouse Inventory</h1>
    </header>
    <div class="container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <nav>
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="#" id="openAddModal">Add Inventory</a></li>
            <li><a href="#" id="openScanModal">Scan Item</a></li>
            <li><a href="/about">About</a></li>
          </ul>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <h2>Item List</h2>
        <table>
          <thead>
            <tr>
              <th>Item Name</th>
              <th>Quantity</th>
              <th>Barcode</th>
              <th>Details</th>
            </tr>
          </thead>
          <tbody>
            <% items.forEach(item => { %>
            <tr>
              <td><%= item.name %></td>
              <td><%= item.quantity %></td>
              <td><%= item.barcode %></td>
              <td><a href="/item/<%= item._id %>">View Details</a></td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </main>
    </div>

    <!-- Add Inventory and Scan Item Modals -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeAddModal">&times;</span>
            <form action="/add-item" method="POST">
                <h2>Add Inventory</h2>
                <label for="name">Item Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" required>

                <label for="category">Category:</label>
                <input type="text" id="category" name="category" required>

                <label for="description">Description:</label>
                <textarea id="description" name="description" rows="4" required></textarea>

                <button type="submit">Add Item</button>
            </form>
        </div>
    </div>

    <div id="scanModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeScanModal">&times;</span>
            <form id="scanForm" action="/scan-item" method="POST">
                <h2>Scan Item</h2>
                <label for="barcode">Scan Barcode:</label>
                <input 
                    type="text" 
                    id="barcode" 
                    name="barcode" 
                    placeholder="Scan barcode here" 
                    required 
                    autofocus>
            </form>
        </div>
    </div>

    <script>
      // Add Inventory Modal
      const addModal = document.getElementById("addModal");
      const openAddModal = document.getElementById("openAddModal");
      const closeAddModal = document.getElementById("closeAddModal");

      openAddModal.addEventListener("click", (event) => {
        event.preventDefault(); // Prevent navigation
        addModal.style.display = "block";
      });

      closeAddModal.addEventListener("click", () => {
        addModal.style.display = "none";
      });

      // Scan Item Modal
      const scanModal = document.getElementById("scanModal");
      const openScanModal = document.getElementById("openScanModal");
      const closeScanModal = document.getElementById("closeScanModal");

      openScanModal.addEventListener("click", (event) => {
        event.preventDefault(); // Prevent navigation
        scanModal.style.display = "block";
      });

      closeScanModal.addEventListener("click", () => {
        scanModal.style.display = "none";
      });

      // Close modals if user clicks outside them
      window.addEventListener("click", (event) => {
        if (event.target === addModal) {
          addModal.style.display = "none";
        } else if (event.target === scanModal) {
          scanModal.style.display = "none";
        }
      });
    </script>
  </body>
</html>
